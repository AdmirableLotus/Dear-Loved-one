{% extends "base.html" %}
{% block content %}

<section class="messages">
  <h2>Your Scheduled Messages</h2>
  <p class="subtitle">View, edit, or schedule new letters for your loved ones.</p>

  <!-- Add New Message Button -->
  <div class="actions">
    <a href="{{ url_for('new_message') }}" class="btn-primary">+ New Message</a>
  </div>

  <!-- Messages Table -->
  <table class="messages-table">
    <thead>
      <tr>
        <th>Recipient</th>
        <th>Delivery Date</th>
        <th>Message Preview</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for message in messages %}
      <tr>
        <td>{{ message.recipient }}</td>
        <td>{{ message.delivery_date.strftime("%B %d, %Y") }}</td>
        <td>{{ message.content[:40] }}...</td>
        <td>
          {% if message.sent %}
            <span class="status sent">Sent</span>
          {% else %}
            <span class="status pending">Pending</span>
          {% endif %}
        </td>
        <td>
          <a href="{{ url_for('view_message', id=message.id) }}">View</a> ·
          <a href="{{ url_for('edit_message', id=message.id) }}">Edit</a> ·
          <a href="{{ url_for('delete_message', id=message.id) }}" onclick="return confirm('Delete this message?')">Delete</a>
        </td>
      </tr>
      {% else %}
      <tr>
        <td colspan="5" class="empty">No messages scheduled yet. Start by creating one!</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</section>

{% endblock %}
